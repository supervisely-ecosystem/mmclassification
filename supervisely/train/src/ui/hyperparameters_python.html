<sly-card class="mt15"
          title="8. Preview full training configuration (autogenerated)"
          subtitle="Training settings in MMClassification are the set of python configs. These configs will be saved to
              Team Files along with other training artifacts. Learn more in app readme.">
    <div slot="header">
        <el-button type="primary" class="regular"
                   @click="command('preview_configs')"
                   :disabled="state.selectedTags.length === 0 || state.started === true">
            Preview
        </el-button>
    </div>
    <div v-if="data.modelPyConfig.length === 0">
        <i class="zmdi zmdi-help" style="color: orange"></i> Press Preview button to generate and visualize training
        configuration (python scripts)
    </div>
    <div v-show="state.selectedTags.length === 0" class="mt10" style="color: red">
        0 training tags are selected at step #2
    </div>

    <sly-field v-if="data.modelPyConfig.length > 0"
               title="Advanced usage (not recommended for most of the users)"
               description="Experienced MMClassification users can edit python configs. In this case app will
               not validate them (do it at your own risk - training can crash if configs are incorrect)">
        <sly-icon slot="icon" :options="{ color: '#fba607', bgColor: '#ffe9da', rounded: false }">
            <i class="zmdi zmdi-lamp"></i>
        </sly-icon>
<!--        <div>{{state.pyConfigsViewOptions}}</div>-->
        <div class="fflex">
            <el-switch
                    class="mr10"
                    v-model="state.advancedPy"
                    on-color="#13ce66"
                    off-color="#B8B8B8"
                    @input="x => {
                                state.advancedPy = x;
                                if (x === true) {
                                    state.pyConfigsViewOptions = data.configsPyViewOptionsWrite;
                                }
                                else {
                                    state.pyConfigsViewOptions = data.configsPyViewOptionsRead;
                                }
                                command('preview_configs');
                            }"
            >
            </el-switch>
            <div>I am PRO in MMClassification and want to edit generated python configs manually</div>
        </div>
    </sly-field>

    <sly-field title="Model config (model_config.py)" v-if="data.modelPyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>model_config.py
        </div>
        <sly-copy-to-clipboard :data="data.modelPyConfig">
            <sly-editor v-model="data.modelPyConfig"
                        :options="state.pyConfigsViewOptions">
            </sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
    <sly-field title="Dataset config (dataset_config.py)" v-if="data.datasetPyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>dataset_config.py
        </div>
        <sly-copy-to-clipboard :data="data.datasetPyConfig">
            <sly-editor v-model="data.datasetPyConfig"
                        :options="state.pyConfigsViewOptions">
            </sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
    <sly-field title="Optimizer and schedule config (schedule_config.py)" v-if="data.schedulePyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>schedule_config.py
        </div>
        <sly-copy-to-clipboard :data="data.schedulePyConfig">
            <sly-editor v-model="data.schedulePyConfig"
                        :options="state.pyConfigsViewOptions">
            </sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
    <sly-field title="Runtime config (runtime_config.py)" v-if="data.runtimePyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>runtime_config.py
        </div>
        <sly-copy-to-clipboard :data="data.runtimePyConfig">
            <sly-editor v-model="data.runtimePyConfig" :options="state.pyConfigsViewOptions"></sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
    <sly-field title="Train config (train_config.py)" v-if="data.mainPyConfig.length > 0">
        <div slot="title" style="color: #fd4685; font-weight: bold;">
            <i class="zmdi zmdi-language-python mr5"></i>train_config.py
        </div>
        <sly-copy-to-clipboard :data="data.mainPyConfig">
            <sly-editor v-model="data.mainPyConfig"
                        :options="state.pyConfigsViewOptions">
            </sly-editor>
        </sly-copy-to-clipboard>
    </sly-field>
</sly-card>