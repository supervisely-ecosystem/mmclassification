<sly-card title="Training tags"
          subtitle="Training supports only tags of type NONE (without values). Tags assigned to 0 images and tags with name
                    'train' and 'val' will be skipped automatically. Also if you would like to train classifier on key-value tags
                    you need to unpack them first using app 'Unpack key-value tags' from Ecosystem"
          :options="{collapsable: true}"
          :collapsed.sync="state.collapsed3"
          :disabled="{disabled: state.disabled3, message: 'Generate train/val splits at step 2 before preview training tags'}">
    <sly-class-balance class="mt15"
                       v-if="data.tagsBalance"
                       v-model="state.selectedTags"
                       :content="data.tagsBalance"
                       :options="data.tagsBalanceOptions">
        <template v-slot:collapse-row="{ row }">
            <!--                v-if="data.tag2urls.hasOwnProperty(row.name)"-->
            <sly-image-slider :data="data.tag2urls[row.name]"
                              :options="data.imageSliderOptions"></sly-image-slider>
        </template>
    </sly-class-balance>
    <div v-if="data.skippedTags.length > 0">
        <hr style="border: 0; border-top: 1px solid rgba(0,0,0,.12); margin-bottom: 15px;"/>
        <sly-field title="These tags can not be used for training"
                   description="Learn more in app readme"
        >
            <table class="beautiful-table al">
                <thead>
                    <tr>
                        <th>Tag name</th>
                        <th>Reason</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="item in data.skippedTags">
                        <td><i class="zmdi zmdi-label mr5" :style="{color:item.color}"></i>{{item.name}}</td>
                        <td>{{item.reason}}</td>
                    </tr>
                </tbody>
            </table>
        </sly-field>
    </div>
    <div class="mt10">
        <el-button type="primary" class="regular mr10"
                   :loading="state.tagsInProgress"
                   v-if="!data.tagsBalance"
                   @click="state.tagsInProgress = true; command('show_tags')">
            Show tags and stats
        </el-button>
        <div v-if="data.tagsBalance">
            <el-button type="primary" class="regular"
                       @click="command('use_tags')"
                       :disabled="state.selectedTags.length < 2 || data.done3">
                Use {{state.selectedTags.length}} selected tags
            </el-button>
            <!--            style="color: #5a6772"-->
            <div v-if="state.selectedTags.length < 2" class="mt5">
                <i class="zmdi zmdi-help" style="color: orange"></i> Please select at least two tags for training
            </div>
        </div>
    </div>
    <div v-if="data.progress3" class="mt10">
        <div style="color: #20a0ff">{{data.progress3}}: {{data.progressCurrent3}} / {{data.progressTotal3}}</div>
        <el-progress :percentage="data.progressPercent3"></el-progress>
    </div>
</sly-card>
